(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{57:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var c,n=a(0),r=a.n(n),i=a(23),o=a.n(i),s=(a(57),a(58),a(81)),l=a(43),d=a(11),p=a(82),u=a(83),g=a(84),b=a(42),j=a(7);!function(e){e.InitializeGame="InitializeGame",e.MoveCardStartingCard="MoveCardStartingCard",e.MoveCardSplitDeck="MoveCardSplitDeck",e.MoveCardTopRight="MoveCardTopRight",e.UpdateSplitDeck="UpdateSplitDeck",e.ToggleDraggedCards="ToggleDraggedCards"}(c||(c={}));var m=a(29),h=a(24),f=a(12),D={startingDeck:[],splitDeck:[],topRightDeck:[]},O=function(e){return e.startingDeck},v=function(e){return e.splitDeck},x=function(e){return e.topRightDeck},k=a(1),y=.7191,C=Object(p.a)({card:{display:"flex",width:"100px",height:"139.06271728549578px",borderRadius:"8px",padding:"0px 4px 0px 4px",backgroundColor:"white",border:"3px solid black"},cardbg:{display:"flex",width:"94px",height:94/y+"px",borderRadius:"8px",border:"3px solid black",backgroundImage:"url(/solitaire/background2.png)",backgroundRepeat:"no-repeat",backgroundSize:"cover"},cardtl:{display:"flex",alignItems:"flex-start"},cardbr:{display:"flex",alignItems:"flex-start",transform:"rotate(-180deg)"},cardValue:{fontSize:"30px"},cardSuit:{fontSize:"30px"},red:{color:"red"},black:{color:"black"},bgImg:{height:"100%"}}),I=r.a.memo((function(e){var t=C(),a=Object(j.b)(),r=(Object(j.c)(O),Object(n.useState)("")),i=Object(d.a)(r,2),o=(i[0],i[1],Object(n.useState)(null)),p=Object(d.a)(o,2);p[0],p[1];var m=Object(u.a)({accept:"Card",drop:function(){return{props:e.card}}}),h=Object(d.a)(m,2);Object(l.a)(h[0]);var f=h[1],D=Object(g.a)({type:"Card",item:function(){return{card:e.card}},end:function(e,t){var n=t.getDropResult();if(e&&n){var r=e.card,i=n.props;if(void 0===r||void 0===i||r.pos===i.pos&&r.column===i.column)console.log("Something is undefined in useDrag or Cant drop a card on is self");else{var o={fromCard:e.card,toCard:n.props};i.isTop&&!r.isInGlobal?a(function(e){return{type:c.MoveCardTopRight,payload:e}}(o)):r.isInGlobal?a(function(e){return{type:c.MoveCardSplitDeck,payload:e}}(o)):i.isTop||a(function(e){return{type:c.MoveCardStartingCard,payload:e}}(o))}}},collect:function(e){return{isDragging:e.isDragging()}}}),v=Object(d.a)(D,3),x=(v[0].isDragging,v[1]),y=v[2];return Object(n.useEffect)((function(){y(Object(b.a)(),{captureDraggingState:!1})}),[]),!1===e.turned||""===e.card.suit?Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(s.a,{ref:function(t){e.canDrop&&f(t),e.canDrag&&x(t)},id:e.card.suit+e.card.numValue,container:!0,direction:"row",className:t.card,style:{color:"\u2665\ufe0e"===e.card.suit||"\u2666\ufe0e"===e.card.suit?"red":"black",border:""===e.card.suit?"2px solid rgba(0, 0, 0, 0.3)":"3px solid rgba(0, 0, 0)",display:e.display?"":"none",cursor:e.canDrag?"pointer":void 0},children:[Object(k.jsxs)(s.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",className:t.cardtl,children:[Object(k.jsx)(s.a,{item:!0,className:t.cardValue,children:e.card.value}),Object(k.jsx)(s.a,{item:!0,className:t.cardSuit,children:e.card.suit})]}),Object(k.jsxs)(s.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",className:t.cardbr,children:[Object(k.jsx)(s.a,{item:!0,className:t.cardValue,children:e.card.value}),Object(k.jsx)(s.a,{item:!0,className:t.cardSuit,children:e.card.suit})]})]})}):Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(s.a,{container:!0,style:{},children:Object(k.jsx)("div",{className:t.cardbg})})})})),S=function(e){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(s.a,{item:!0,style:{position:"static",top:"0px"},children:Object(k.jsx)(I,{card:{suit:"",value:"",numValue:-1,discovered:!1,column:e.column,pos:-1,isTop:!1,isInGlobal:!1,display:!0},canDrag:!1,canDrop:!0,display:!0,turned:!1})}),e.cards.length>0?e.cards.map((function(t,a){return Object(k.jsx)(s.a,{item:!0,className:t.discovered?"pile"+t.column:"",style:{position:"absolute",top:0===t.pos?"0px":43*t.pos+"px",overflow:"hidden",zIndex:40},children:Object(k.jsx)(I,{card:t,turned:!t.discovered,display:!0,canDrop:a===e.cards.length-1,canDrag:t.discovered})},a)})):Object(k.jsx)(k.Fragment,{children:" "})]})},T=function(e){return Object(k.jsx)(s.a,{container:!0,direction:"row",alignItems:"flex-start",justify:"space-between",children:e.startingDeck.map((function(e,t){return Object(k.jsx)(s.a,{item:!0,style:{position:"relative"},children:Object(k.jsx)(S,{cards:e,column:t})},t)}))})},w=a(80),R=a(35);var G=function(e){var t=Object(n.useState)(-1),a=Object(d.a)(t,2),r=a[0],i=a[1],o=Object(j.c)(v),l=Object(j.b)();return Object(k.jsxs)(s.a,{container:!0,direction:"row",justify:"space-between",children:[Object(k.jsx)(s.a,{item:!0,onClick:function(){r>=e.splitDeck.length-1?(l({type:c.UpdateSplitDeck}),i(-1)):i(r+1),console.log(r)},children:Object(k.jsx)(I,{card:{suit:"bg",value:"",numValue:-1,discovered:!1,column:-1,pos:-1,isTop:!1,isInGlobal:!1,display:!0},turned:!0,display:!0,canDrop:!1,canDrag:!1})}),Object(k.jsx)(s.a,{item:!0,style:{width:"100px"},children:Object(k.jsx)(s.a,{container:!0,direction:"row",style:{position:"relative"},children:r>-1?o[r].map((function(e,t){return Object(k.jsx)(s.a,{item:!0,style:{position:"absolute",left:50*t+"px"},children:Object(k.jsx)(I,{card:e,turned:!1,display:!0,canDrop:!1,canDrag:t===o[r].length-1})},t)})):""})}),Object(k.jsx)(s.a,{item:!0,style:{width:"100px"}}),e.topRightDeck.map((function(e,t){return Object(k.jsx)(s.a,{item:!0,children:Object(k.jsx)(I,{card:e[e.length-1],turned:!1,display:!0,canDrop:!0,canDrag:!1})},t)}))]})},M=["\u2660\ufe0e","\u2665\ufe0e","\u2663\ufe0e","\u2666\ufe0e"],N=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],V=[1,2,3,4,5,6,7,8,9,10,11,12,13];function _(){for(var e=function(){for(var e=[],t=function(){var e,t=[],a=Object(h.a)(M);try{for(a.s();!(e=a.n()).done;)for(var c=e.value,n=0;n<N.length;n++)t.push({suit:c,value:N[n],numValue:V[n],discovered:!0,column:-1,pos:-1,isTop:!1,isInGlobal:!0,display:!0})}catch(r){a.e(r)}finally{a.f()}return t}(),a=0;a<7;a++){for(var c=[],n=0;n<=a;n++){var r=Math.floor(Math.random()*t.length),i=t[r];t.splice(r,1),i.column=a,i.pos=n,i.isInGlobal=!1,i.discovered=!1,n===a&&(i.discovered=!0),c.push(i)}e.push(c)}return{startingDeck:e,globalDeck:t}}(),t=[],a=0;e.globalDeck.length;){var c=[];c=e.globalDeck.length-3>0?e.globalDeck.splice(e.globalDeck.length-3,3):e.globalDeck.splice(0,e.globalDeck.length);for(var n=0;n<c.length;n++)c[n].pos=n,c[n].column=a;t.push(c),a++}return{splitDeck:t,startingDeck:e.startingDeck}}var z=a(40),E=a(50),F=r.a.memo((function(e){var t=Object(n.useState)(null),a=Object(d.a)(t,2),c=a[0],r=a[1],i=Object(n.useMemo)((function(){return function(e,t){return e?Object(m.a)(t[e.column]).splice(e.pos,t[e.column].length-e.pos):[]}(c,e.startingDeck)}),[c,e.startingDeck]);return Object(k.jsx)(E.a,{generator:function(e){e.itemType;var t=e.item,a=e.style;return t&&t.card&&r(t.card),i.length>0?Object(k.jsx)(k.Fragment,{children:i.map((function(e,t){return Object(k.jsx)(s.a,{item:!0,style:Object(z.a)(Object(z.a)({},a),{},{position:"absolute",top:43*t+"px",zIndex:50}),children:Object(k.jsx)(I,{card:e,turned:!e.discovered,display:!0,canDrop:t===i.length-1,canDrag:e.discovered})},t)}))}):Object(k.jsx)(k.Fragment,{})}})}));var U=function(){var e=Object(j.b)(),t=Object(j.c)(O),a=Object(j.c)(v),r=Object(j.c)(x);return Object(n.useEffect)((function(){var t,a=_();e((t={startingDeck:a.startingDeck,splitDeck:a.splitDeck,topRightDeck:[[{suit:"",value:"",numValue:-1,discovered:!1,column:0,pos:-1,isTop:!0,isInGlobal:!1,display:!0}],[{suit:"",value:"",numValue:-1,discovered:!1,column:1,pos:-1,isTop:!0,isInGlobal:!1,display:!0}],[{suit:"",value:"",numValue:-1,discovered:!1,column:2,pos:-1,isTop:!0,isInGlobal:!1,display:!0}],[{suit:"",value:"",numValue:-1,discovered:!1,column:3,pos:-1,isTop:!0,isInGlobal:!1,display:!0}]]},{type:c.InitializeGame,payload:t})),console.log("Board initialized")}),[]),Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)(w.a,{backend:R.a,children:[Object(k.jsx)(F,{startingDeck:t}),Object(k.jsxs)(s.a,{container:!0,spacing:8,direction:"column",style:{margin:"20px 18vw 20px 18vw"},children:[Object(k.jsx)(s.a,{item:!0,children:Object(k.jsx)(G,{topRightDeck:r,splitDeck:a})}),Object(k.jsx)(s.a,{item:!0,children:Object(k.jsx)(T,{startingDeck:t})})]})]})})},X=a(14),J=Object(X.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.MoveCardStartingCard:return Object(f.a)(e,(function(e){var a,c=t.payload.fromCard,n=t.payload.toCard,r=e.startingDeck[c.column].splice(c.pos,e.startingDeck[c.column].length-c.pos),i=Object(h.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;0===e.startingDeck[n.column].length?o.pos=0:o.pos=e.startingDeck[n.column].length,o.column=n.column,e.startingDeck[n.column].push(o)}}catch(s){i.e(s)}finally{i.f()}e.startingDeck[c.column].length>0&&(e.startingDeck[c.column][c.pos-1].discovered=!0)}));case c.MoveCardSplitDeck:return Object(f.a)(e,(function(e){var a=t.payload.toCard,c=e.splitDeck[t.payload.fromCard.column].splice(t.payload.fromCard.pos)[0];c.column=a.column,c.pos=a.pos+1,a.isTop?(c.isTop=!0,c.isInGlobal=!1,e.topRightDeck[a.column].push(c)):(c.isInGlobal=!1,e.startingDeck[a.column].push(c))}));case c.MoveCardTopRight:var a=t.payload.fromCard;return e.startingDeck[a.column].length-1===a.pos?Object(f.a)(e,(function(e){var c=e.startingDeck[a.column].splice(a.pos)[0];e.startingDeck[a.column].length>0&&(e.startingDeck[a.column][a.pos-1].discovered=!0),c.isTop=!0,c.column=t.payload.toCard.column,e.topRightDeck[t.payload.toCard.column].push(c)})):e;case c.UpdateSplitDeck:return console.log("Resetting splitdeck"),Object(f.a)(e,(function(e){for(var t=Object(m.a)(e.splitDeck),a=[],c=0;c<t.length;c++)a=t[c].concat(a);t=[];for(var n=0;a.length;){var r=[];r=a.length-3>0?a.splice(a.length-3,3):a.splice(0,a.length);for(var i=0;i<r.length;i++)r[i].pos=i,r[i].column=n;t.push(r),n++}e.splitDeck=t}));case c.InitializeGame:return console.log("Initializing Game"),Object(f.a)(e,(function(e){e.startingDeck=t.payload.startingDeck,e.splitDeck=t.payload.splitDeck,e.topRightDeck=t.payload.topRightDeck}));case c.ToggleDraggedCards:return Object(f.a)(e,(function(e){for(var a=t.payload.pos;a<e.startingDeck[t.payload.column].length;a++)e.startingDeck[t.payload.column][a].display=!e.startingDeck[t.payload.column][a].display}));default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(Object(k.jsx)(j.a,{store:J,children:Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(U,{})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.1ca0b485.chunk.js.map