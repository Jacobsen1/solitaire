(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{49:function(e,o,t){},50:function(e,o,t){},57:function(e,o,t){"use strict";t.r(o);var c=t(0),a=t.n(c),n=t(31),r=t.n(n),l=(t(49),t(9)),i=t(5),s=(t(50),t(74)),d=t(75),u=t(76),p=t(77),m=t(3),g=.7191,b=Object(d.a)({card:{display:"flex",width:"100px",height:"139.06271728549578px",borderRadius:"8px",padding:"0px 4px 0px 4px",backgroundColor:"white",border:"3px solid black"},cardbg:{display:"flex",width:"94px",height:94/g+"px",borderRadius:"8px",border:"3px solid black",backgroundImage:"url(background2.png)",backgroundRepeat:"no-repeat",backgroundSize:"cover"},cardtl:{display:"flex",alignItems:"flex-start"},cardbr:{display:"flex",alignItems:"flex-start",transform:"rotate(-180deg)"},cardValue:{fontSize:"30px"},cardSuit:{fontSize:"30px"},red:{color:"red"},black:{color:"black"},bgImg:{height:"100%"}}),v=a.a.memo((function(e){var o=b();e.card.isInGlobal&&e.card.suit;var t=Object(u.a)({accept:"Card",drop:function(){return{props:e.card}}}),c=Object(l.a)(t,2),a=c[0],n=(a.canDrop,a.isOver,c[1]),r=Object(p.a)({type:"Card",item:function(){return console.log(e.card.suit+" "+e.card.value),{card:e.card}},end:function(o,t){var c=t.getDropResult();if(o&&c){var a=o.card,n=c.props;if(void 0===a||void 0===n||a.pos===n.pos&&a.column===n.column)console.log("Something is undefined in useDrag or Cant drop a card on"),console.log(a),console.log(n);else if(console.log(a),console.log(n),n.isTop&&void 0!==e.moveCardToTopRight){var r=n.column;console.log("You dropped ".concat(a.value,", ").concat(a.suit," into topRightDeck ").concat(r)),e.moveCardToTopRight(a,r)}else a.isInGlobal&&void 0!==e.moveCardFromSplit?(console.log("You dropped ".concat(a.value,", ").concat(a.suit," from splitDeck into ").concat(n.value,", ").concat(n.suit)),e.moveCardFromSplit(a,n)):void 0===e.moveCard||n.isTop||(console.log("You dropped ".concat(a.value,", ").concat(a.suit," into ").concat(n.value,", ").concat(n.suit)),e.moveCard(a,n))}}}),i=Object(l.a)(r,3),d=(i[0],i[1]);i[2];return!1===e.turned||""===e.card.suit?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(s.a,{ref:function(o){e.canDrop&&n(o),e.canDrag&&d(o)},container:!0,direction:"row",className:o.card,style:{color:"\u2665\ufe0e"===e.card.suit||"\u2666\ufe0e"===e.card.suit?"red":"black",border:""===e.card.suit?"2px solid rgba(0, 0, 0, 0.3)":"3px solid rgba(0, 0, 0)",display:e.display?"":"none"},children:[Object(m.jsxs)(s.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",className:o.cardtl,children:[Object(m.jsx)(s.a,{item:!0,className:o.cardValue,children:e.card.value}),Object(m.jsx)(s.a,{item:!0,className:o.cardSuit,children:e.card.suit})]}),Object(m.jsxs)(s.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",className:o.cardbr,children:[Object(m.jsx)(s.a,{item:!0,className:o.cardValue,children:e.card.value}),Object(m.jsx)(s.a,{item:!0,className:o.cardSuit,children:e.card.suit})]})]}),e.children]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.a,{container:!0,style:{},children:Object(m.jsx)("div",{className:o.cardbg})}),e.children]})})),h=a.a.memo((function(e){var o=e.currentCard+1;Object(c.useCallback)((function(o,t){e.moveCard(o,t)}),[e.cards]),Object(c.useCallback)((function(o,t){e.moveCardToTopRight(o,t)}),[e.cards]);return e.currentCard<e.cards.length-1?Object(m.jsx)(s.a,{item:!0,style:{position:e.currentCard>0?"absolute":"static",top:1===e.currentCard?"0px":"43px"},children:Object(m.jsx)(v,{card:e.cards[e.currentCard],turned:!e.cards[e.currentCard].discovered,display:!0,canDrop:!1,canDrag:e.cards[e.currentCard].discovered,moveCard:e.moveCard,moveCardToTopRight:e.moveCardToTopRight,children:Object(m.jsx)(h,{cards:e.cards,column:e.column,totalCards:e.totalCards,currentCard:o,moveCard:e.moveCard,moveCardToTopRight:e.moveCardToTopRight})})}):Object(m.jsx)(s.a,{item:!0,style:{position:e.currentCard>0?"absolute":"static",top:1===e.currentCard?"0px":"43px"},children:Object(m.jsx)(v,{card:e.cards[e.currentCard],turned:!1,display:!0,canDrop:!0,canDrag:e.cards[e.currentCard].discovered,moveCard:e.moveCard,moveCardToTopRight:e.moveCardToTopRight})})})),j=function(e){return Object(m.jsx)(s.a,{container:!0,direction:"row",alignItems:"flex-start",justify:"space-between",children:e.startingDeck.map((function(o,t){return Object(m.jsx)(s.a,{item:!0,style:{position:"relative"},children:o.length>0?Object(m.jsx)(h,{cards:o,column:t,totalCards:o.length,currentCard:0,moveCard:e.moveCard,moveCardToTopRight:e.moveCardToTopRight}):""},t)}))})},f=t(73),x=t(40);var O=function(e){var o=Object(c.useState)(-1),t=Object(l.a)(o,2),a=t[0],n=t[1],r=Object(c.useCallback)((function(o,t){e.moveCardFromSplit(o,t)}),[e.topRightDeck,e.splitDeck]);return Object(m.jsxs)(s.a,{container:!0,direction:"row",justify:"space-between",children:[Object(m.jsx)(s.a,{item:!0,onClick:function(){console.log(a),a>=e.splitDeck.length-1?(e.updateSplitDeck(),n(-1)):n(a+1)},children:Object(m.jsx)(v,{card:{suit:"bg",value:"",numValue:-1,discovered:!1,column:-1,pos:-1,isTop:!1,isInGlobal:!1},turned:!0,display:!0,canDrop:!1,canDrag:!1})}),Object(m.jsx)(s.a,{item:!0,style:{width:"100px"},children:Object(m.jsx)(s.a,{container:!0,direction:"row",style:{position:"relative"},children:e.splitDeck.map((function(e,o){return e.map((function(t,c){return Object(m.jsx)(s.a,{item:!0,style:{position:"absolute",left:50*c+"px"},children:Object(m.jsx)(v,{card:t,turned:!1,display:o===a,canDrop:!1,canDrag:c===e.length-1,moveCardFromSplit:r})},c)}))}))})}),Object(m.jsx)(s.a,{item:!0,style:{width:"100px"}}),e.topRightDeck.map((function(e,o){return Object(m.jsx)(s.a,{item:!0,children:Object(m.jsx)(v,{card:e[e.length-1],turned:!1,display:!0,canDrop:!0,canDrag:!1})},o)}))]})},C=t(38),D=["\u2660\ufe0e","\u2665\ufe0e","\u2663\ufe0e","\u2666\ufe0e"],k=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],T=[1,2,3,4,5,6,7,8,9,10,11,12,13];function y(){for(var e=function(){for(var e=[],o=function(){var e,o=[],t=Object(C.a)(D);try{for(t.s();!(e=t.n()).done;)for(var c=e.value,a=0;a<k.length;a++)o.push({suit:c,value:k[a],numValue:T[a],discovered:!0,column:-1,pos:-1,isTop:!1,isInGlobal:!0})}catch(n){t.e(n)}finally{t.f()}return o}(),t=0;t<7;t++){var c=[];c.push({suit:"",value:"",numValue:-1,discovered:!1,column:t,pos:-1,isTop:!1,isInGlobal:!1});for(var a=0;a<=t;a++){var n=Math.floor(Math.random()*o.length),r=o[n];o.splice(n,1),r.column=t,r.pos=a,r.isInGlobal=!1,r.discovered=!1,a===t&&(r.discovered=!0),c.push(r)}e.push(c)}return{startingDeck:e,globalDeck:o}}(),o=[];e.globalDeck.length;)e.globalDeck.length-3>0?o.push(e.globalDeck.splice(e.globalDeck.length-3,3)):o.push(e.globalDeck.splice(0,e.globalDeck.length));return{splitDeck:o,startingDeck:e.startingDeck}}function S(e,o){if(""===o.suit&&""===o.value&&-1===o.pos)return!0;if("\u2665\ufe0e"===o.suit||"\u2666\ufe0e"===o.suit){if(e.numValue+1===o.numValue&&("\u2663\ufe0e"===e.suit||"\u2660\ufe0e"===e.suit))return!0}else if(e.numValue+1===o.numValue&&("\u2665\ufe0e"===e.suit||"\u2666\ufe0e"===e.suit))return!0;return console.log("INVALID MOVE"),!1}function I(e,o){return""===o.suit&&""===o.value&&"A"===e.value||(console.log("First card must be A"),e.numValue===o.numValue+1&&e.suit===o.suit||(console.log("Selected card must be same suit and one value higher"),console.log("INVALID MOVE"),!1))}var R=function(){var e=Object(c.useState)([]),o=Object(l.a)(e,2),t=o[0],a=o[1],n=Object(c.useState)([]),r=Object(l.a)(n,2),d=r[0],u=r[1],p=Object(c.useState)([]),g=Object(l.a)(p,2),b=g[0],v=g[1];return Object(c.useEffect)((function(){var e=y();a(e.startingDeck),u(e.splitDeck),v([[{suit:"",value:"",numValue:-1,discovered:!1,column:0,pos:-1,isTop:!0,isInGlobal:!1}],[{suit:"",value:"",numValue:-1,discovered:!1,column:1,pos:-1,isTop:!0,isInGlobal:!1}],[{suit:"",value:"",numValue:-1,discovered:!1,column:2,pos:-1,isTop:!0,isInGlobal:!1}],[{suit:"",value:"",numValue:-1,discovered:!1,column:3,pos:-1,isTop:!0,isInGlobal:!1}]]),console.log("Board initialized")}),[]),console.log(t),console.log(d),Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(f.a,{backend:x.a,children:Object(m.jsxs)(s.a,{container:!0,spacing:8,direction:"column",style:{margin:"20px 18vw 20px 18vw"},children:[Object(m.jsx)(s.a,{item:!0,children:Object(m.jsx)(O,{topRightDeck:b,splitDeck:d,moveCardFromSplit:function(e,o){if(void 0!==e&&void 0!==o&&function(e,o){return o.isTop?I(e,o):S(e,o)}(e,o)){for(var c=Object(i.a)(d),n=0;n<c.length;n++)e===c[n][c[n].length-1]&&c[n].splice(-1,1);if(e.column=o.column,e.pos=o.pos+1,o.isTop){var r=Object(i.a)(b);r[o.column].push(e),v(r)}else{var l=Object(i.a)(t);e.isTop=!1,l[o.column].push(e),a(l)}u(c)}else console.log("Something undefined or illegeal move in moveCardFromTop")},updateSplitDeck:function(){console.log("Resetting");for(var e=Object(i.a)(d),o=[],t=0;t<e.length;t++)o=e[t].concat(o);for(e=[];o.length;)o.length-3>0?e.push(o.splice(o.length-3,3)):e.push(o.splice(0,o.length));console.log(e),u(e)}})}),Object(m.jsx)(s.a,{item:!0,children:Object(m.jsx)(j,{startingDeck:t,moveCard:function(e,o){if(void 0!==e&&void 0!==o&&S(e,o)){var c=Object(i.a)(t),n=c[e.column].splice(e.pos+1,c[e.column].length-1);c[e.column].length>1&&(c[e.column][c[e.column].length-1].discovered=!0);for(var r=0;r<n.length;r++)n[r].column=o.column,n[r].pos=c[o.column].length-1,c[o.column].push(n[r]);a(c)}else console.log("Something undefined or illegeal move in moveCard")},moveCardToTopRight:function(e,o){var c=Object(i.a)(b),n=Object(i.a)(t);console.log(e,o),console.log(c[o][c[o].length-1]),void 0!==e&&I(e,c[o][c[o].length-1])&&n[e.column].length-2===e.pos?(n[e.column].splice(e.pos+1,1),n[e.column].length>1&&(n[e.column][n[e.column].length-1].discovered=!0),e.isTop=!0,e.column=o,c[o].push(e),a(n),v(c)):console.log("Something undefined or illegeal movein moveCardToTopRow")}})})]})})})},V=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,79)).then((function(o){var t=o.getCLS,c=o.getFID,a=o.getFCP,n=o.getLCP,r=o.getTTFB;t(e),c(e),a(e),n(e),r(e)}))};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(R,{})}),document.getElementById("root")),V()}},[[57,1,2]]]);
//# sourceMappingURL=main.a1667ff7.chunk.js.map