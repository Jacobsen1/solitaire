(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{57:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var c,r=a(0),n=a.n(r),i=a(23),o=a.n(i),s=(a(57),a(58),a(81)),l=a(42),d=a(22),p=a(82),u=a(83),g=a(84),b=a(41),j=a(6);!function(e){e.InitializeGame="InitializeGame",e.MoveCardStartingCard="MoveCardStartingCard",e.MoveCardSplitDeck="MoveCardSplitDeck",e.MoveCardTopRight="MoveCardTopRight",e.UpdateSplitDeck="UpdateSplitDeck",e.ToggleDraggedCards="ToggleDraggedCards"}(c||(c={}));var m=function(e){return{type:c.ToggleDraggedCards,payload:e}},h=a(2),f=.7191,D=Object(p.a)({card:{display:"flex",width:"100px",height:"139.06271728549578px",borderRadius:"8px",padding:"0px 4px 0px 4px",backgroundColor:"white",border:"3px solid black"},cardbg:{display:"flex",width:"94px",height:94/f+"px",borderRadius:"8px",border:"3px solid black",backgroundImage:"url(/solitaire/background2.png)",backgroundRepeat:"no-repeat",backgroundSize:"cover"},cardtl:{display:"flex",alignItems:"flex-start"},cardbr:{display:"flex",alignItems:"flex-start",transform:"rotate(-180deg)"},cardValue:{fontSize:"30px"},cardSuit:{fontSize:"30px"},red:{color:"red"},black:{color:"black"},bgImg:{height:"100%"}}),v=n.a.memo((function(e){var t=D(),a=Object(j.b)();var n=Object(u.a)({accept:"Card",drop:function(){return{props:e.card}}}),i=Object(d.a)(n,2);Object(l.a)(i[0]);var o=i[1],p=Object(g.a)({type:"Card",item:function(){return{card:e.card}},end:function(t,r){var n=r.getDropResult();if(t&&n){var i=t.card,o=n.props;if(void 0===i||void 0===o||i.pos===o.pos&&i.column===o.column)a(m({card:e.card,display:!0})),console.log("Something is undefined in useDrag or Cant drop a card on is self");else{var s={fromCard:t.card,toCard:n.props};o.isTop&&!i.isInGlobal?a(function(e){return{type:c.MoveCardTopRight,payload:e}}(s)):i.isInGlobal?a(function(e){return{type:c.MoveCardSplitDeck,payload:e}}(s)):o.isTop||a(function(e){return{type:c.MoveCardStartingCard,payload:e}}(s))}}else a(m({card:e.card,display:!0}))},collect:function(e){return{isDragging:e.isDragging(),item:e.getItem(),didDrop:e.didDrop()}}}),f=Object(d.a)(p,3),v=f[0],O=v.isDragging,x=v.item,k=(v.didDrop,f[1]),y=f[2];return Object(r.useEffect)((function(){y(Object(b.a)(),{captureDraggingState:!1})}),[]),Object(r.useEffect)((function(){x&&x.card&&O&&a(m({card:x.card,display:!O}))}),[O,x,a]),!1===e.turned||""===e.card.suit?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(s.a,{ref:function(t){e.canDrop&&o(t),e.canDrag&&k(t)},id:e.card.suit+e.card.numValue,container:!0,direction:"row",className:t.card,style:{color:"\u2665\ufe0e"===e.card.suit||"\u2666\ufe0e"===e.card.suit?"red":"black",border:""===e.card.suit?"2px solid rgba(0, 0, 0, 0.3)":"3px solid rgba(0, 0, 0)",cursor:e.canDrag?"pointer":void 0},children:[Object(h.jsxs)(s.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",className:t.cardtl,children:[Object(h.jsx)(s.a,{item:!0,className:t.cardValue,children:e.card.value}),Object(h.jsx)(s.a,{item:!0,className:t.cardSuit,children:e.card.suit})]}),Object(h.jsxs)(s.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",className:t.cardbr,children:[Object(h.jsx)(s.a,{item:!0,className:t.cardValue,children:e.card.value}),Object(h.jsx)(s.a,{item:!0,className:t.cardSuit,children:e.card.suit})]})]})}):Object(h.jsx)(s.a,{container:!0,children:Object(h.jsx)("div",{className:t.cardbg})})})),O=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a,{item:!0,style:{position:"static",top:"0px"},children:Object(h.jsx)(v,{card:{suit:"",value:"",numValue:-1,discovered:!1,column:e.column,pos:-1,isTop:!1,isInGlobal:!1,display:!0},canDrag:!1,canDrop:!0,turned:!1})}),e.cards.length>0?e.cards.map((function(t,a){return Object(h.jsx)(s.a,{item:!0,className:t.discovered?"pile"+t.column:"",style:{position:"absolute",top:0===t.pos?"0px":43*t.pos+"px",overflow:"hidden",zIndex:40},children:Object(h.jsx)(v,{card:t,turned:!t.discovered,canDrop:a===e.cards.length-1,canDrag:t.discovered})},a)})):Object(h.jsx)(h.Fragment,{children:" "})]})},x=function(e){return Object(h.jsx)(s.a,{container:!0,direction:"row",alignItems:"flex-start",justify:"space-between",children:e.startingDeck.map((function(e,t){return Object(h.jsx)(s.a,{item:!0,style:{position:"relative"},children:Object(h.jsx)(O,{cards:e,column:t})},t)}))})},k=a(80),y=a(34),C=a(50),I=a(28),S=a(11),T={startingDeck:[],splitDeck:[],topRightDeck:[],draggedCards:[]},w=function(e){return e.startingDeck},R=function(e){return e.splitDeck},G=function(e){return e.topRightDeck},M=function(e){return e.draggedCards};var N=function(e){var t=Object(r.useState)(-1),a=Object(d.a)(t,2),n=a[0],i=a[1],o=Object(j.c)(R),l=Object(j.b)();return Object(h.jsxs)(s.a,{container:!0,direction:"row",justify:"space-between",children:[Object(h.jsx)(s.a,{item:!0,onClick:function(){n>=e.splitDeck.length-1?(l({type:c.UpdateSplitDeck}),i(-1)):i(n+1),console.log(n)},children:Object(h.jsx)(v,{card:{suit:"bg",value:"",numValue:-1,discovered:!1,column:-1,pos:-1,isTop:!1,isInGlobal:!1,display:!0},turned:!0,canDrop:!1,canDrag:!1})}),Object(h.jsx)(s.a,{item:!0,style:{width:"100px"},children:Object(h.jsx)(s.a,{container:!0,direction:"row",style:{position:"relative"},children:n>-1?o[n].map((function(e,t){return Object(h.jsx)(s.a,{item:!0,style:{position:"absolute",left:50*t+"px"},children:Object(h.jsx)(v,{card:e,turned:!1,canDrop:!1,canDrag:t===o[n].length-1})},t)})):""})}),Object(h.jsx)(s.a,{item:!0,style:{width:"100px"}}),e.topRightDeck.map((function(e,t){return Object(h.jsx)(s.a,{item:!0,children:Object(h.jsx)(v,{card:e[e.length-1],turned:!1,canDrop:!0,canDrag:!1})},t)}))]})},V=["\u2660\ufe0e","\u2665\ufe0e","\u2663\ufe0e","\u2666\ufe0e"],E=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],_=[1,2,3,4,5,6,7,8,9,10,11,12,13];function z(){for(var e=function(){for(var e=[],t=function(){var e,t=[],a=Object(I.a)(V);try{for(a.s();!(e=a.n()).done;)for(var c=e.value,r=0;r<E.length;r++)t.push({suit:c,value:E[r],numValue:_[r],discovered:!0,column:-1,pos:-1,isTop:!1,isInGlobal:!0,display:!0})}catch(n){a.e(n)}finally{a.f()}return t}(),a=0;a<7;a++){for(var c=[],r=0;r<=a;r++){var n=Math.floor(Math.random()*t.length),i=t[n];t.splice(n,1),i.column=a,i.pos=r,i.isInGlobal=!1,i.discovered=!1,r===a&&(i.discovered=!0),c.push(i)}e.push(c)}return{startingDeck:e,globalDeck:t}}(),t=[],a=0;e.globalDeck.length;){var c=[];c=e.globalDeck.length-3>0?e.globalDeck.splice(e.globalDeck.length-3,3):e.globalDeck.splice(0,e.globalDeck.length);for(var r=0;r<c.length;r++)c[r].pos=r,c[r].column=a;t.push(c),a++}return{splitDeck:t,startingDeck:e.startingDeck}}var U=a(39),F=a(49),X=n.a.memo((function(){var e=Object(j.c)(M),t=Object(r.useMemo)((function(){return e}),[e]);return Object(h.jsx)(F.a,{generator:function(e){e.itemType,e.item;var a=e.style;return t.length>0?Object(h.jsx)(h.Fragment,{children:t.map((function(e,c){return Object(h.jsx)(s.a,{item:!0,style:Object(U.a)(Object(U.a)({},a),{},{position:"absolute",top:43*c+"px",zIndex:50}),children:Object(h.jsx)(v,{card:e,turned:!e.discovered,canDrop:c===t.length-1,canDrag:e.discovered})},c)}))}):Object(h.jsx)(h.Fragment,{})}})}));var J=function(){var e=Object(j.b)(),t=Object(j.c)(w),a=Object(j.c)(R),n=Object(j.c)(G);return Object(r.useEffect)((function(){var t,a=z();e((t={startingDeck:a.startingDeck,splitDeck:a.splitDeck,topRightDeck:[[{suit:"",value:"",numValue:-1,discovered:!1,column:0,pos:-1,isTop:!0,isInGlobal:!1,display:!0}],[{suit:"",value:"",numValue:-1,discovered:!1,column:1,pos:-1,isTop:!0,isInGlobal:!1,display:!0}],[{suit:"",value:"",numValue:-1,discovered:!1,column:2,pos:-1,isTop:!0,isInGlobal:!1,display:!0}],[{suit:"",value:"",numValue:-1,discovered:!1,column:3,pos:-1,isTop:!0,isInGlobal:!1,display:!0}]],draggedCards:[]},{type:c.InitializeGame,payload:t})),console.log("Board initialized")}),[]),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(k.a,{backend:y.a,children:[Object(h.jsx)(X,{}),Object(h.jsxs)(s.a,{container:!0,spacing:8,direction:"column",style:{margin:"20px 18vw 20px 18vw"},children:[Object(h.jsx)(s.a,{item:!0,children:Object(h.jsx)(N,{topRightDeck:n,splitDeck:a})}),Object(h.jsx)(s.a,{item:!0,children:Object(h.jsx)(x,{startingDeck:t})})]})]})})},A=a(13),B=Object(A.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.MoveCardStartingCard:return Object(S.a)(e,(function(e){var a=t.payload.fromCard,c=t.payload.toCard,r=e.draggedCards.slice(0);console.log(r);var n,i=Object(I.a)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;0===e.startingDeck[c.column].length?o.pos=0:o.pos=e.startingDeck[c.column].length,o.column=c.column,e.startingDeck[c.column].push(o)}}catch(s){i.e(s)}finally{i.f()}e.startingDeck[a.column].length>0&&(e.startingDeck[a.column][a.pos-1].discovered=!0)}));case c.MoveCardSplitDeck:return Object(S.a)(e,(function(e){var a=t.payload.toCard,c=e.splitDeck[t.payload.fromCard.column].splice(t.payload.fromCard.pos)[0];c.column=a.column,c.pos=a.pos+1,a.isTop?(c.isTop=!0,c.isInGlobal=!1,e.topRightDeck[a.column].push(c)):(c.isInGlobal=!1,e.startingDeck[a.column].push(c))}));case c.MoveCardTopRight:var a=t.payload.fromCard;return e.startingDeck[a.column].length-1===a.pos?Object(S.a)(e,(function(e){var c=e.startingDeck[a.column].splice(a.pos)[0];e.startingDeck[a.column].length>0&&(e.startingDeck[a.column][a.pos-1].discovered=!0),c.isTop=!0,c.column=t.payload.toCard.column,e.topRightDeck[t.payload.toCard.column].push(c)})):e;case c.UpdateSplitDeck:return console.log("Resetting splitdeck"),Object(S.a)(e,(function(e){for(var t=Object(C.a)(e.splitDeck),a=[],c=0;c<t.length;c++)a=t[c].concat(a);t=[];for(var r=0;a.length;){var n=[];n=a.length-3>0?a.splice(a.length-3,3):a.splice(0,a.length);for(var i=0;i<n.length;i++)n[i].pos=i,n[i].column=r;t.push(n),r++}e.splitDeck=t}));case c.InitializeGame:return console.log("Initializing Game"),Object(S.a)(e,(function(e){e.startingDeck=t.payload.startingDeck,e.splitDeck=t.payload.splitDeck,e.topRightDeck=t.payload.topRightDeck}));case c.ToggleDraggedCards:return Object(S.a)(e,(function(e){if(t.payload.display){e.draggedCards.map((function(a){return e.startingDeck[t.payload.card.column].push(a)})),e.draggedCards=[]}else{var a=e.startingDeck[t.payload.card.column].splice(t.payload.card.pos);e.draggedCards=a}}));default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(Object(h.jsx)(j.a,{store:B,children:Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(J,{})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.a3050ce1.chunk.js.map